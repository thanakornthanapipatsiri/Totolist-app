{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\UNS_CT\\\\Desktop\\\\work\\\\240-311\\\\TODO_Final\\\\todolist-with-react-and-socketIO\\\\client\\\\src\\\\components\\\\Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Modal from \"./Modal\";\nimport Nav from \"./Nav\";\nimport backgroundImage from \"https://cdn2.vectorstock.com/i/1000x1000/32/26/light-white-gray-texture-background-digital-vector-28503226.jpg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Main(_ref) {\n  _s();\n\n  let {\n    socket\n  } = _ref;\n  const [todo, setTodo] = useState(\"\");\n  const [todoList, setTodoList] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedItemID, setSelectedItemID] = useState(\"\");\n\n  const toggleModal = itemId => {\n    socket.emit(\"viewComments\", itemId);\n    setSelectedItemID(itemId);\n    setShowModal(!showModal);\n  };\n\n  const generateID = () => Math.random().toString(36).substring(2, 10);\n\n  const handleAddTodo = e => {\n    e.preventDefault();\n    socket.emit(\"addTodo\", {\n      id: generateID(),\n      todo,\n      comments: []\n    });\n    setTodo(\"\");\n  };\n\n  useEffect(() => {\n    function fetchTodos() {\n      fetch(\"http://localhost:4000/api\").then(res => res.json()).then(data => setTodoList(data)).catch(err => console.error(err));\n    }\n\n    fetchTodos();\n    socket.on(\"todos\", data => setTodoList(data));\n  }, [socket]);\n\n  const deleteTodo = id => socket.emit(\"deleteTodo\", id);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundImage: `url(${backgroundImage})`,\n      backgroundSize: \"cover\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleAddTodo,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: todo,\n        onChange: e => setTodo(e.target.value),\n        className: \"input\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"form__cta\",\n        children: \"ADD TODO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"todo__container\",\n      children: todoList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"todo__item\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.todo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"commentsBtn\",\n            onClick: () => toggleModal(item.id),\n            children: \"View Comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"deleteBtn\",\n            onClick: () => deleteTodo(item.id),\n            children: \"DELETE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this), showModal ? /*#__PURE__*/_jsxDEV(Modal, {\n      showModal: showModal,\n      setShowModal: setShowModal,\n      selectedItemID: selectedItemID,\n      socket: socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Main, \"Xc7oyNfEzXrJQ6Kuvv12lM1m5fo=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Nav","backgroundImage","Main","socket","todo","setTodo","todoList","setTodoList","showModal","setShowModal","selectedItemID","setSelectedItemID","toggleModal","itemId","emit","generateID","Math","random","toString","substring","handleAddTodo","e","preventDefault","id","comments","fetchTodos","fetch","then","res","json","data","catch","err","console","error","on","deleteTodo","backgroundSize","target","value","map","item"],"sources":["C:/Users/UNS_CT/Desktop/work/240-311/TODO_Final/todolist-with-react-and-socketIO/client/src/components/Main.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Modal from \"./Modal\";\nimport Nav from \"./Nav\";\nimport backgroundImage from \"https://cdn2.vectorstock.com/i/1000x1000/32/26/light-white-gray-texture-background-digital-vector-28503226.jpg\";\n\nfunction Main({ socket }) {\n\tconst [todo, setTodo] = useState(\"\");\n\tconst [todoList, setTodoList] = useState([]);\n\n\tconst [showModal, setShowModal] = useState(false);\n\tconst [selectedItemID, setSelectedItemID] = useState(\"\");\n\n\tconst toggleModal = (itemId) => {\n\t\tsocket.emit(\"viewComments\", itemId);\n\t\tsetSelectedItemID(itemId);\n\t\tsetShowModal(!showModal);\n\t};\n\n\tconst generateID = () => Math.random().toString(36).substring(2, 10);\n\n\tconst handleAddTodo = (e) => {\n\t\te.preventDefault();\n\t\tsocket.emit(\"addTodo\", {\n\t\t\tid: generateID(),\n\t\t\ttodo,\n\t\t\tcomments: [],\n\t\t});\n\t\tsetTodo(\"\");\n\t};\n\n\tuseEffect(() => {\n\t\tfunction fetchTodos() {\n\t\t\tfetch(\"http://localhost:4000/api\")\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((data) => setTodoList(data))\n\t\t\t\t.catch((err) => console.error(err));\n\t\t}\n\t\tfetchTodos();\n\t\tsocket.on(\"todos\", (data) => setTodoList(data));\n\t}, [socket]);\n\n\tconst deleteTodo = (id) => socket.emit(\"deleteTodo\", id);\n\n\treturn (\n\t\t<div style={{backgroundImage: `url(${backgroundImage})`, backgroundSize: \"cover\"}}>\n\t\t\t<Nav />\n\t\t\t<form className='form' onSubmit={handleAddTodo}>\n\t\t\t\t<input\n\t\t\t\t\tvalue={todo}\n\t\t\t\t\tonChange={(e) => setTodo(e.target.value)}\n\t\t\t\t\tclassName='input'\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<button className='form__cta'>ADD TODO</button>\n\t\t\t</form>\n\n\t\t\t<div className='todo__container'>\n\t\t\t\t{todoList.map((item) => (\n\t\t\t\t\t<div className='todo__item' key={item.id}>\n\t\t\t\t\t\t<p>{item.todo}</p>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='commentsBtn'\n\t\t\t\t\t\t\t\tonClick={() => toggleModal(item.id)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView Comments\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button className='deleteBtn' onClick={() => deleteTodo(item.id)}>\n\t\t\t\t\t\t\t\tDELETE\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t{showModal ? (\n\t\t\t\t<Modal\n\t\t\t\t\tshowModal={showModal}\n\t\t\t\t\tsetShowModal={setShowModal}\n\t\t\t\t\tselectedItemID={selectedItemID}\n\t\t\t\t\tsocket={socket}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default Main;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}