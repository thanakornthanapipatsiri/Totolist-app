{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\UNS_CT\\\\Desktop\\\\work\\\\240-311\\\\TODO_Final\\\\todolist-with-react-and-socketIO\\\\client\\\\src\\\\components\\\\Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Modal from \"./Modal\";\nimport Nav from \"./Nav\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Main(_ref) {\n  _s();\n\n  let {\n    socket\n  } = _ref;\n  const [todo, setTodo] = useState(\"\");\n  const [todoList, setTodoList] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedItemID, setSelectedItemID] = useState(\"\");\n  const [createdBy, setCreatedBy] = useState(\"\");\n\n  const toggleModal = (itemId, createdBy) => {\n    socket.emit(\"viewComments\", itemId);\n    setSelectedItemID(itemId);\n    setCreatedBy(createdBy);\n    setShowModal(!showModal);\n  };\n\n  const generateID = () => Math.random().toString(36).substring(2, 10);\n\n  const handleAddTodo = e => {\n    e.preventDefault();\n    const createdBy = localStorage.getItem(\"_username\");\n    socket.emit(\"addTodo\", {\n      id: generateID(),\n      todo,\n      comments: [],\n      createdBy\n    });\n    setTodo(\"\");\n  };\n\n  useEffect(() => {\n    function fetchTodos() {\n      fetch(\"http://localhost:4000/api\").then(res => res.json()).then(data => setTodoList(data)).catch(err => console.error(err));\n    }\n\n    fetchTodos();\n    socket.on(\"todos\", data => setTodoList(data));\n  }, [socket]);\n\n  const deleteTodo = id => socket.emit(\"deleteTodo\", id);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleAddTodo,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: todo,\n        onChange: e => setTodo(e.target.value),\n        className: \"input\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"form__cta\",\n        children: \"ADD TODO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"todo__container\",\n      children: todoList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"todo__item\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.todo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Created by: \", item.createdBy]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"commentsBtn\",\n            onClick: () => toggleModal(item.id, item.createdBy),\n            children: \"View Comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"deleteBtn\",\n            onClick: () => deleteTodo(item.id),\n            children: \"DELETE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this), showModal ? /*#__PURE__*/_jsxDEV(Modal, {\n      showModal: showModal,\n      setShowModal: setShowModal,\n      selectedItemID: selectedItemID,\n      createdBy: createdBy,\n      socket: socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Main, \"6YJMhR+QZtJawUImHwWlpAYxs9U=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Nav","Main","socket","todo","setTodo","todoList","setTodoList","showModal","setShowModal","selectedItemID","setSelectedItemID","createdBy","setCreatedBy","toggleModal","itemId","emit","generateID","Math","random","toString","substring","handleAddTodo","e","preventDefault","localStorage","getItem","id","comments","fetchTodos","fetch","then","res","json","data","catch","err","console","error","on","deleteTodo","target","value","map","item"],"sources":["C:/Users/UNS_CT/Desktop/work/240-311/TODO_Final/todolist-with-react-and-socketIO/client/src/components/Main.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Modal from \"./Modal\";\nimport Nav from \"./Nav\";\n\nfunction Main({ socket }) {\n\tconst [todo, setTodo] = useState(\"\");\n\tconst [todoList, setTodoList] = useState([]);\n\tconst [showModal, setShowModal] = useState(false);\n\tconst [selectedItemID, setSelectedItemID] = useState(\"\");\n\tconst [createdBy, setCreatedBy] = useState(\"\");\n\n\tconst toggleModal = (itemId, createdBy) => {\n\t\tsocket.emit(\"viewComments\", itemId);\n\t\tsetSelectedItemID(itemId);\n\t\tsetCreatedBy(createdBy);\n\t\tsetShowModal(!showModal);\n\t};\n\n\tconst generateID = () => Math.random().toString(36).substring(2, 10);\n\n\tconst handleAddTodo = (e) => {\n\t\te.preventDefault();\n\t\tconst createdBy = localStorage.getItem(\"_username\");\n\t\tsocket.emit(\"addTodo\", {\n\t\t\tid: generateID(),\n\t\t\ttodo,\n\t\t\tcomments: [],\n\t\t\tcreatedBy\n\t\t});\n\t\tsetTodo(\"\");\n\t};\n\n\tuseEffect(() => {\n\t\tfunction fetchTodos() {\n\t\t\tfetch(\"http://localhost:4000/api\")\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((data) => setTodoList(data))\n\t\t\t\t.catch((err) => console.error(err));\n\t\t}\n\t\tfetchTodos();\n\t\tsocket.on(\"todos\", (data) => setTodoList(data));\n\t}, [socket]);\n\n\tconst deleteTodo = (id) => socket.emit(\"deleteTodo\", id);\n\n\treturn (\n\t\t<div>\n\t\t\t<Nav />\n\t\t\t<form className='form' onSubmit={handleAddTodo}>\n\t\t\t\t<input\n\t\t\t\t\tvalue={todo}\n\t\t\t\t\tonChange={(e) => setTodo(e.target.value)}\n\t\t\t\t\tclassName='input'\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<button className='form__cta'>ADD TODO</button>\n\t\t\t</form>\n\n\t\t\t<div className='todo__container'>\n\t\t\t\t{todoList.map((item) => (\n\t\t\t\t\t<div className='todo__item' key={item.id}>\n\t\t\t\t\t\t<p>{item.todo}</p>\n            <p>Created by: {item.createdBy}</p>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='commentsBtn'\n\t\t\t\t\t\t\t\tonClick={() => toggleModal(item.id, item.createdBy)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView Comments\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button className='deleteBtn' onClick={() => deleteTodo(item.id)}>\n\t\t\t\t\t\t\t\tDELETE\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t{showModal ? (\n\t\t\t\t<Modal\n\t\t\t\t\tshowModal={showModal}\n\t\t\t\t\tsetShowModal={setShowModal}\n\t\t\t\t\tselectedItemID={selectedItemID}\n          createdBy={createdBy}\n\t\t\t\t\tsocket={socket}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default Main;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}